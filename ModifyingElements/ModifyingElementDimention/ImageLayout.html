<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Document</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            height: 100vh; width: 100vw;
            display: grid; place-items: center;
            font-family: Arial, Helvetica, sans-serif;
            background-color: #f7f7f7;
        }
        :root { --layout-size: 80px; --container-maxSize: 800px; }
        .container {
            display: grid; width: clamp(400px, 90%, var(--container-maxSize));
            border: 1px solid #d3d4d4;
            border-radius: 5px; text-align: center;
            margin-block: 2%;
        }
        .layout-header {
            color: #6a6b6b; padding: 10px;
            border-bottom: 1px solid #d3d4d4;
        }
        .image-layout-option {
            display: flex; flex-wrap: wrap;
            gap: 45px; padding: 20px;
            justify-content: center;
        }
        .layout {
            width: var(--layout-size); aspect-ratio: 1;
            border: 1px solid #cccccc; border-radius: 5px;
            display: grid; place-items: center;
            position: relative; padding: 6px;
            cursor: pointer;
        }
        .template {
            width: 100%; height: 100%;
            border: 3px solid #cccccc;
            display: grid; grid-template-columns: repeat(12, 1fr);
            grid-template-rows: repeat(4, 1fr);
            gap: 3px 2px; padding: 4px;
        }
        .item { 
        width: 100%; height: 100%; background-color: #cccccc; 
         }
        /* Optimized layouts */
        .opt1 .item { grid-column: span 12; grid-row: span 4; }
        .opt2 .item { grid-column: span 6; grid-row: span 4; }
        .opt3 .item { grid-column: span 4; grid-row: span 4; }
        .opt4 .one { grid-column: span 4; grid-row: span 4; }
        .opt4 .two { grid-column: span 8; grid-row: span 4; }
        .opt5 .one { grid-column: span 8; grid-row: span 4; }
        .opt5 .two { grid-column: span 4; grid-row: span 4; }
        .opt6 .item { grid-column: span 12; }
        .opt6 .two { grid-row: span 2; }
        .opt7 .item { grid-column: span 12; }
        .opt7 .two, .opt7 .three { grid-row: span 2; grid-column: span 6; }
        .opt8 .item { grid-column: span 12; }
        .opt8 .two, .opt8 .three, .opt8 .four { grid-row: span 2; grid-column: span 4; }
        .opt9 .item { grid-column: span 12; }
        .opt9 .two { grid-row: span 2; grid-column: span 8; }
        .opt9 .three { grid-row: span 2; grid-column: span 4; }
        .opt10 .item { grid-column: span 12; }
        .opt10 .two { grid-row: span 2; grid-column: span 4; }
        .opt10 .three { grid-row: span 2; grid-column: span 8; }
        .opt11 .item { grid-column: span 12; }
        .opt11 .two, .opt11 .four { grid-row: span 2; grid-column: span 3; }
        .opt11 .three { grid-row: span 2; grid-column: span 6; }
        .opt12 .one { grid-column: span 8; }
        .opt12 .two { grid-column: span 4; grid-row: span 4; }
        .opt12 .three, .opt12 .four { grid-column: span 4; grid-row: span 2; }
        .opt12 .five { grid-column: span 8; grid-row: span 1; }
        .chosen { border: solid 2px green; }
        .fa-solid { color: white; background-color: green; position: absolute; bottom: 0; left: 0; padding: 3px; border-radius: 0 5px 0 0; display: none; }
        .show { display: block; }
        .image-layout {
            width: clamp(400px, 90%, calc(var(--container-maxSize) + 600px));
            aspect-ratio: 1.3; display: flex;
            flex-direction: column; justify-content: center;
            align-items: center;
        }
        .header {
            width: clamp(400px, 90%, calc(var(--container-maxSize) + 600px));
            display: grid; place-items: center;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <div class="layout-header">Layout</div>
            <div class="image-layout-option">
                <!-- Layout Options -->
                <div class="layout opt1"><div class="template"><div class="item one"></div><i class="fa-solid fa-check"></i></div></div>
                <div class="layout opt2"><div class="template"><div class="item one"></div><div class="item two"></div><i class="fa-solid fa-check"></i></div></div>
                <div class="layout opt3"><div class="template"><div class="item one"></div><div class="item two"></div><div class="item three"></div><i class="fa-solid fa-check"></i></div></div>
                <div class="layout opt4"><div class="template"><div class="item one"></div><div class="item two"></div><i class="fa-solid fa-check"></i></div></div>
                <div class="layout opt5"><div class="template"><div class="item one"></div><div class="item two"></div><i class="fa-solid fa-check"></i></div></div>
                <div class="layout opt6"><div class="template"><div class="item one"></div><div class="item two"></div><div class="item three"></div><i class="fa-solid fa-check"></i></div></div>
                <div class="layout opt7"><div class="template"><div class="item one"></div><div class="item two"></div><div class="item three"></div><div class="item four"></div><i class="fa-solid fa-check"></i></div></div>
                <div class="layout opt8"><div class="template"><div class="item one"></div><div class="item two"></div><div class="item three"></div><div class="item four"></div><div class="item five"></div><i class="fa-solid fa-check"></i></div></div>
                <div class="layout opt9"><div class="template"><div class="item one"></div><div class="item two"></div><div class="item three"></div><div class="item four"></div><i class="fa-solid fa-check"></i></div></div>
                <div class="layout opt10"><div class="template"><div class="item one"></div><div class="item two"></div><div class="item three"></div><div class="item four"></div><i class="fa-solid fa-check"></i></div></div>
                <div class="layout opt11"><div class="template"><div class="item one"></div><div class="item two"></div><div class="item three"></div><div class="item four"></div><div class="item five"></div><i class="fa-solid fa-check"></i></div></div>
                <div class="layout opt12"><div class="template"><div class="item one"></div><div class="item two"></div><div class="item three"></div><div class="item four"></div><div class="item five"></div><i class="fa-solid fa-check"></i></div></div>
            </div>
        </div>
        <div class="image-layout"></div>
    </div>
    <script>
        const layoutContainer = document.querySelector('.image-layout-option');
        const imageLayout = document.querySelector('.image-layout');
    
        function setDefaultLayout() {
            const firstLayout = layoutContainer.querySelector('.layout');
            firstLayout.classList.add('chosen');
            const checkIcon = firstLayout.querySelector('.fa-check');
            checkIcon.classList.add('show');
            updateImageLayout(firstLayout);
        }
    
        function updateImageLayout(selectedLayout) {
            imageLayout.innerHTML = ''; // Clear previous layout
    
            const clonedDiv = selectedLayout.cloneNode(true);
            clonedDiv.style.width = "clamp(400px, 100%, 1250px)";
            clonedDiv.style.aspectRatio = "1.2";
            clonedDiv.style.padding = "0";
            clonedDiv.style.border = "none";
            clonedDiv.style.gap = "10px";
            clonedDiv.style.cursor = "default";
    
            // Remove the check icon from the cloned layout
            const checkIcon = clonedDiv.querySelector('.fa-check');
            if (checkIcon) {
                checkIcon.remove();
            }
    
            const template = clonedDiv.querySelector('.template');
            template.style.padding = "0";
            template.style.border = "none";
            template.style.gap = "10px";
    
            const items = template.querySelectorAll('.item');
            items.forEach((item, index) => {
                item.style.width = "100%";
                item.style.padding = "0";
                item.style.borderRadius = "5px";
                item.style.backgroundSize = 'cover';           // Ensures background image covers entire item
                item.style.backgroundPosition = 'center';      // Centers the background image
                item.style.backgroundRepeat = 'no-repeat';     // Prevents tiling if the image is too small
                item.style.cursor = 'pointer';
    
                // Add click event for each item to upload and display image
                item.addEventListener('click', () => {
                    const fileInput = document.createElement('input');
                    fileInput.type = 'file';
                    fileInput.accept = 'image/*'; // Restrict to image files only
    
                    // Listen for file selection
                    fileInput.addEventListener('change', (event) => {
                        const file = event.target.files[0];
                        if (file) {
                            const reader = new FileReader();
                            reader.onload = (e) => {
                                item.style.backgroundImage = `url(${e.target.result})`;
                            };
                            reader.readAsDataURL(file); // Convert file to data URL
                        }
                    });
    
                    // Trigger the file input dialog
                    fileInput.click();
                });
            });
    
            imageLayout.appendChild(clonedDiv);
        }
    
        layoutContainer.addEventListener('click', function(event) {
            const clickedLayout = event.target.closest('.layout');
            if (clickedLayout) {
                layoutContainer.querySelectorAll('.layout').forEach(opt => {
                    opt.classList.remove('chosen');
                    opt.querySelector('.fa-check').classList.remove('show');
                });
    
                clickedLayout.classList.add('chosen');
                clickedLayout.querySelector('.fa-check').classList.add('show');
                
                updateImageLayout(clickedLayout);
            }
        });
    
        window.onload = setDefaultLayout;
    </script>
    
    
</body>
</html>
